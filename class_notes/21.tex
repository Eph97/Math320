\section{2022-11-30}

\subsection{Completeness of Measures}

We arrived at the Lebesgue integral by extending Riemann integral so:
\begin{itemize}
	\item[($\star$)] If $f_n$ integrable and $f_n \geq f_{n+1} \geq 0$, and $f = \lim_{n\to \infty} f_n$ integrable, then $\int f = \lim_{n \to \infty} f_n$

\begin{example}
	Take the $\frac{1}{2^{n+1} - 1}$-Cantor set.
	$C = \bigcap C_n$.
	 \[
		 \int_{[0,1]} \1_{C_n} \to \frac{1}{2} \quad \text{as } n \to \infty.
	\]
	but $1_{C}$ not Riemann integrable.
\end{example}

However, we also get an additional completeness property for free from construction:

\item[($\star \star$)] If $f : \R^d \to [0,\infty]$ Lebesgue measurable, $\int f \, dL = 0$ and $0 \leq g \leq f$, then $g$ Lebesgue measurable and $\int g \, dL = 0$.
\end{itemize}

\begin{lemma}
	If $A \subseteq \R^d$ Lebesgue measurable, $m(A) = 0$, and $B \subseteq  A$, then $B$ is Lebesgue measurable.
\end{lemma}

\begin{proof}
	Recall $A \subseteq \R^d$ is Lebesgue measurable if and only if
	\[
		L^*(E) = L^*(E \cap A) + L^* (E \cap A^c) \quad \text{for all } E \subseteq \R^d
	\]
	If $B \subseteq A$ and $L(A) = 0$, then
	\begin{align*}
		L^*(E) &\leq L^*(E \cap B) + L^*(E \cap B^c) \\
			   &\leq L^*(E \cap B) + L^*(E \cap A^c) + L^*(E \cap A \cap B^c) \\
			   &\leq 2 L^*(A) + L^*(E \cap A^c) \\
				 &= L^* (E \cap A^c) \\
			   &\leq L^*(E \cap A^c) + L^*(E \cap A) \\
			   &= L^*(E)
	\end{align*}
\end{proof}

\begin{remark}
	If we restrict $L$ to Borel sets $\B(\R^d)$ then we lose property ($\star \star$).
\end{remark}

\begin{example}
	The $\frac{1}{2}$-Cantor set $C$ contains non-Borel sets.
	Consider your favorite staircase function.

	\[
		f(x) = \int \1_{[0,1]}\1_{C} \, dH^{\frac{\log{2}}{\log{3}}}
	\]
	is continuous and non-decreasing and $f(c) = [0,1]$.
\end{example}

Choose $A \subseteq [0,1]$ that is not Borel. (E.g. the Vitali set which is not Lebesgue measurable).

$f^{-1} (A)$ is not Borel, since image of Borel set through continuous non-decreasing function is Borel.

\begin{remark}
	A general measure space $(X, S, m)$ will always satisfy ($\star$) but may not satisfy  ($\star \star$).
\end{remark}

\begin{definition}[Completeness]
	Call $(X,S,m)$ \underline{complete} if $B \in S$ whenever, $B \subseteq A \in S$ and $m(A) = 0$.
\end{definition}

\begin{theorem}
	Suppose $(X,S, m)$ measure space. If $S^*$ be subset $E \subseteq X$ for which there are $A \subseteq E \subseteq B$.
	which $A,B \in S$ and $m(B \setminus A) = 0$ and we define  $m^*(E) = m(A) = m(B)$, then we have $(X,S^*, m^*)$ complete.
\end{theorem}

\begin{remark}
	This is the smallest possible completion.
\end{remark}

\begin{proof}
	$S^* \contains S$. If $E \in S^*$, then choose $A \subseteq E \subseteq B$ with $A,B \in S$ and $m(B \setminus A) = 0$
\end{proof}

\begin{theorem}
	Suppose $(X,s, m)$ measure space, let $S^*$ be subset $E \subseteq X$ for which there are $A \subseteq E \subseteq B$ with
	$A, B \in S$ and $m(B \setminus A) = 0$ and we define  $m^*(E) = m(A) = m(B)$, then have $(X,S^*, m^*)$ complete.
\end{theorem}

\begin{remark}
	This is the smallest possible completion
\end{remark}

\begin{proof}
	$S^* \contains S_0$ if $E \in S^*$, then choose $A \subseteq E \subseteq B$ with $A,B \in S$ and  $m(B \setminus A) = 0$.

	Observe  $B^c \subseteq E^c \subseteq A^c$ and $A^c \setminus B^c = B \setminus A_0$. So
	 $E^c \in S^*$. If $E_k \in S^*$ and $A_k \subseteq E \subseteq B_k$ with $A_k, B_k \in S$ and $m(B_k \setminus A_k) = 0$,
	 then
	 \[
		 A = \bigcup_{k} A_k \subseteq
		 E = \bigcup_{k} E_k \subseteq
		 B = \bigcup_{k} B_k
	 \]
	 $A,B \in S$, and
	 \begin{align*}
		 m(B \setminus A) \leq \sum_{k} m(B_{k} \setminus A) \leq \sum_{k} m(B_{k} \setminus A_k) = 0
	 \end{align*}
\end{proof}

Proof that $m^*$

\begin{corollary}
	$L$ is completion of its restriction to Borel $\sigma$-algebra.
\end{corollary}

\begin{theorem}
	If $m : \mathcal{P}(X) \to [0,\infty]$ is an outer measure, then $(X,S_m, m)$ is complete.
\end{theorem}

\begin{proof}
	Same proof as lemma for Lebesgue measure from Before.

	Completion is (mildly) incompatible with products.
\end{proof}

\begin{example}
	Suppose $(X_1, S_1, m_1)$ and  $(X_2, S_2, m_2)$ are complete,
	$(X_1 \times X_2, S_1 \times S_2, m_1 \times m_2)$ usually \underline{not} compute.
\end{example}

Suppose $A_1 \in S$, $A_1 \neq \emptyset$,  $m_1(A_1) = 0$,  $A_2 \subseteq X_2$, $A_2 \notin S_2$
then
\begin{align*}
	A_1 \times A_2 \notin S_1 \times S_2
\end{align*}

\begin{align*}
	A_1 \times A_2 \subseteq A_1 \times X_2, \quad A_1 \times A_2 \in S_1 \times S_2, \quad \text{and} \\
	(m_1 \times m_2) (A_1 \times X_2) = 0
\end{align*}

\begin{lemma}
	If $X_1$ and $X_2$ are topological spaces, then $\B(X_1 \times X_2) = \B(X_1) \times \B(X_2)$
\end{lemma}

\begin{proof}
	The topology on $X_1 \times X_2$ is generated by $U_1 \times U_2$ for $U_1 \subseteq X_1$ and $U_2 \subseteq X_2$ open.

	$\B(X)$ generated by open $U \subseteq X$, $\B(X_1) \times \B(X_2)$ generated by $A_1 \times A_1$ for
	$A_1 \in \B(X_1)$ and $A_2 \B(X_2)$

	Combining these, obtain
	 \[
		\B(X_1 \times X_2) \subseteq \B(X_1) \times \B(X_2)
	\]
	Consider $\{U_1 \times X_2 : U_1 \subseteq X_1 \text{ open} \}$
	and observe it generates
	\[
		\{A_1 \times X_2 : A_1 \subseteq X_1 \text{ Borel } \}
	\]

	\underline{Similar}: $\{ X_1 \times U_2 : U_2 \subseteq X_2 \text{ open }\}$
	generates $\{ X_1 \times A_2 : A_2 \subseteq X_2 \text{Borel} \}$

	\[
		A_1 \times A_2 = (A_1 \times X_2 ) \cap (X_1 \times A_2)
	\] So
	\[
		\B(X_1 \times X_2 ) \contains \B(X_1) \times \B(X_2)
	\]
\end{proof}

\begin{corollary}
	$L^{d_1 + d_2}$ is the completion of $L^{d_1} \times L^{d_2}$ here $L^d$ is Lebesgue measure on $\R^d$.
\end{corollary}

\subsection{Completed Version of Fubini}

\begin{lemma} If $f^*$ is  $(X, S^*, m^*)$ measurable.
	Then there exists $(X, S, m)$ measurable $f$ with $f: X \to [0,\infty]$, $f \leq f^*$ and $m^* * \{f < f^* \}) = 0$
\end{lemma}

\begin{proof}
	Write $f^* = \lim_{n \to \infty} f_n^*$ with $f_{n}^* : X \to [0, \infty]$ is $S^*$-simple and
	$f_n^* \leq f_{n+1}^*$.
	Assume $f_{0}^* = 0$. Write
	\begin{align*}
		f^* &= \sum_{n \geq 0} (f_{n+1}^* - f_n^*) \\
			&= \sum_{k \geq 0} \alpha_{k} \1_{E_k}
	\end{align*}
	where $\alpha_k \geq 0$ and $E_k \in S^*$. Choose $A_k, B_k \in S$ with $A_k \subseteq E_k \subseteq B_k$ and
	$m(B_k \setminus A_k) = 0$.

	Let $f = \sum_{k \geq 0} \alpha_{k} \1_{A_k}$ have $f \leq f^*$ and
	\begin{align*}
		\{ f \leq f^* \} \subseteq \bigcup_{k} (B_{k} \setminus A_k)
	\end{align*}
\end{proof}

\begin{theorem}[Completed Fubini]
	Suppose $(X_1, S_1, m_1)$ and $(X_2, S_2, m_2$ are complete and finite measure spaces.
	If $f: X_1 \times X_2 \to [0,\infty]$ is $(S_1, \times S_2)^*$ measurable, then
	\begin{enumerate}
		\item $f^*(X_1, \circ)$ is $S_2-$ measurable for $m_1$ almost every $x_1$.
		\item $f^*(\circ, X_2)$ is $S_1$ measurable for $m_2$ almost every $x_2$, and
		\item $\int f^* d(m_1 \times m_2)^* = \int \int f^*(x_1, x_2) dm_1(x_1) dm_2 (x_2)$
	\end{enumerate}
\end{theorem}

\begin{proof}
	Build $f : X_1 \times X_2 \to [0,\infty]$,  $S_1 \times S_2$ measurable, $f \leq f^*$, and \\
	$m^*(\{ f < f^* \}) = 0$.
	By usual fubini, consider only  $f^* - f$.
	That is, it suffices to show theorem when $(m_1 \times m_2)^* (\{ f*>0 \}) =0$.

	Choose  $B \in S_1 \times S_2$ with $\{f^* > 0 \} \subseteq B$ and $(m_1 \times m_2 ) (B) = 0$.

	\noindent By Fubini:
	\[
		\int m_2 (B_{x_1,\cdot}) dm_1 (x_1) = 0. \footnote{In particular this is $S_1$-measurable as a funtion of $x_1$ }
	\]

	\noindent It follows that $m_2(B_{x_1, \cdot}) = 0$ for $m_1$-almost every $x_1$.

	Now, where $m_2 (B_{x_1, \cdot}) = 0$, then, since $\{ f^* > 0 \}_{x_1,\cdot} \subseteq B_{x_1, \cdot}$,
	we have
	\[
		.
	\]
	$\{f^* > 0 \}_{x_1, \cdot} \in S_2$ and $m_2 (\{ f^* > 0\})=0$, and  $f^*(X_1, \cdot)$ is $S_2$-measure.
	\footnote{This is (1)}
	The proof of (2) is symmetric.
	Since $(m_1\times m_2)^*(\{ f^* > 0 \}) = 0$, we have
	\[
		\int f^* \, d(m_1 \times m_2)^* = 0.
	\]
	Since  $m_2(\{f^* >0 \})_{x_1, \cdot}) = 0$ for $m_1$-almost every $x_1$,
	\[
	 	\iint f^* (x_1, x_2) \, dm_2 (x_2) \, dm_1 (x_1) = 0.
	\]
\end{proof}

